\chapter{Styling text}

%
%
%
\section{The not so minor characters}

This is not a style guide, but let us still first talk about punctuation.
There are some characters that look very similar but are actually different.

\begin{practices}
Stylish use of punctuation makes your text look so much more professional.
Some (but not nearly all) journals employ copy editors
who have a keen eye for these issues.
\end{practices}

\noindent\emph{The hyphen -, coded as} \verb|-|\\*
Use this in hyphenated compound words (quasi-invariant)
and when a single person's name has many parts (Eric Vanden-Eijnden).

\medskip\noindent\emph{The en dash --, coded as} \verb|--|\\*
Slightly longer than the humble hyphen,
this is used for numeric intervals (2017--2021)
and separating several persons' names (Cauchy--Schwarz inequality).

\medskip\noindent\emph{The em dash ---, coded as} \verb|---|\\*
The longest of them all, used generally only for parenthetical remarks.%
\footnote{Parenthetical remarks are usually written---such as here---with an em~dash and no space,
or -- like here -- with en~dash and spaces,
but please consult a style guide.}

\medskip\noindent\emph{The apostrophe ', coded as} \verb|'|\\*
Used in English to indicate omission of letters (I've)
and possessive form (Grönwall's inequality).

\medskip\noindent\emph{The single quotes `', coded as} \verb|` '|\\*
Note this: when a single word is `quoted',
the opening and closing quotes look slightly different.
On a Finnish keyboard, you get the opening character by pressing
\fbox{Shift}+\fbox{\makebox[1pt]{\raisebox{3pt}{\textasciigrave}}\makebox[0pt]{\raisebox{-3pt}{\textasciiacute}}}.

\medskip\noindent\emph{The double quotes ``'', coded as} \verb|`` ''|\\*
This effect is even more exaggerated with ``double quotes'';
if you use the \verb|"| symbol on your keyboard,
you get "not as nice" quotes.

Moreover, different languages have different quoting styles;
these commands map to correct quotes when the \pkg[quotes]{babel} package is loaded
(we talk about this in \Cref{sec:babel}).


%
%
\subsection{Special characters}

Most characters reserved for \LaTeX{} commands can be produced by prefixing them with a backslash:
\% is produced by \verb|\%|, \# by \verb|\#|, \$ by \verb|\$|, and \& by \verb|\&|.
The only exception is \textbackslash, which is given by \verb|\textbackslash|.\index{backslash!in text}

There is also a whole lot of special characters and symbols accessible
through special commands: for example, \textcopyright{} via \verb|\textcopyright{}|.
To find these, I highly recommend the Detexify tool.
\footnote{\url{https://detexify.kirelabs.org/classify.html}}

\bigskip\noindent%
Since \LaTeX{} is nowadays Unicode-native,
you can write letters like \verb|åäö| directly into your source code.
If you can't find the specific letter on your keyboard,
or the journal you're submitting to uses age-old tools,
the old commands for producing accents are still there.
These are useful for e.g.\ author names in bibliographies.
You can find the full list online;
some common examples are here:
%
\begin{VerbatimOut}{\jobname.tmp}
\r{A}bo Akademi\\
Wac\l{}aw Sierpi\'{n}ski\\
Bernt \O{}ksendal\\
Besan\c{c}on\\
\v{S}koda
\end{VerbatimOut}
\ShowExample


%
%
\todo{Font Awesome and maybe even emoji}


%
%
%
\section{Style and size}

\subsection{Styles}
\LaTeX{} provides three independent attributes for modifying the appearance of text.
These are:

\begin{description}
\item[Family] The basic shape of the font.
    There are three families by default: serif, \textsf{sans serif}, and \texttt{typewriter}.
    In these notes, the sans serif font is used to highlight package names,
    and the typewriter font is used for \LaTeX{} code.

\item[Series] This is the combination of weight and width of the font.
    Generally, one only needs to care about the normal and \textbf{bold} series.
    Those into graphical design know that this is only the tip of the iceberg;
    see \todo{talk about this in the font customization section?}

\item[Shape] Usual choices include upright, \textit{italic}, and \textsc{small capitals}.
    Technically, small caps is not a shape variant but an independent style altogether,
    but we are simplifying things here.
\end{description}

These can be freely combined (although non-default fonts might not support all combinations):
%
\begin{VerbatimOut}{\jobname.tmp}
\textsf{\textit{italic sans serif}}\\
\textbf{\texttt{bold typewriter}}
\end{VerbatimOut}
\ShowExample

The following table shows the most common font commands.
These come in two forms: the first takes the text as its argument,
and the second applies the change to all the following text
(until end of scope; see p.~\pageref{ex:font scope}).

\begin{figure}[h]
\centering
% What happens below is TeX magic, and something you should only use in
% an advanced context like showing off inside the code of a LaTeX lecture note.
% To understand how this works, look up \csname in the index of Knuth's TeXbook.
\newcommand{\example}[3]{\cmd{#1}\texttt{\{...\}} &%
    \texttt{\{}\cmd{#2}\texttt{ ...\}} & \csname#1\endcsname{#3}}
\begin{tabular}{l|l|l}
Command form & Declarative form & Output\\
\hline
\example{textrm}{rmfamily}{Serif family (default)}\\
\example{textsf}{sffamily}{Sans serif}\\
\example{texttt}{ttfamily}{Typewriter}\\[1em]
\example{textbf}{bfseries}{Bold series}\\[1em]
\example{textit}{itshape}{Italic shape}\\
\example{textsc}{scshape}{Small capitals}
\end{tabular}
\end{figure}

There are two important points to remember:
First, you should keep the semantics and the styling separate.
For example, these notes define a \verb|\pkg| command to highlight package names;
there are no \verb|\textsf| commands sprinkled around the code.%
\footnote{Moreover, this command adds an entry to the index.
Thus the code is not only semantically meaningful but also benefits the reader.}

Another is that you should not use \verb|\textit| to emphasize text.
It is much better to use \cmd{emph}:
first, it is semantically meaningful, and second, it supports nesting:%
\begin{VerbatimOut}{\jobname.tmp}
Sometimes you need to
\emph{emphasize} a point.
\emph{And sometimes your emphasis
contains \emph{an even more important}
point to consider.}
\end{VerbatimOut}
\ShowExample
%
If you need a declarative form (for use in an environment), it is \cmd{em}.


\subsection{But what about underlining?}

\LaTeX{} does not provide a command to underline text.
Many typography enthusiasts consider underlining bad style,
an unfortunate byproduct of mechanical typewriters where you could not (easily) change the font.

If you still want to underline things, there is the \pkg{ulem} package.
By default, it rewrites \cmd[underline]{emph} to use (nested) underlining instead of italic,
so you might want to load it as \verb|\usepackage[normalem]{ulem}|,
which keeps \verb|\emph| as it usually is.

In addition to \cmd{uline}, this package also provides the \cmd{sout} command
that lets you strike out text.\index{strike-out text}
There are also several styles of underlines:
%
\begin{VerbatimOut}{\jobname.tmp}
\uline{Underlined}\\
\uuline{Doubly so}\\
\sout{Struck out}\\
\uwave{Waves}\\
\dashuline{Dashes}\\
\dotuline{Dots}
\end{VerbatimOut}
\ShowExample


%
%
\subsection{Size}

Coming from any graphical word processor or layout program,
you have seen fonts being measured in \emph{points}.
\LaTeX{} does support it (see \Cref{sec:typefaces} where we talk about font customization),
but again it works against separating content from presentation.

Instead, \LaTeX{} offers a range of sizes relative to the default document font
passed as the class option (\Cref{sec:document classes}).
These are as follows:
%
\begin{figure}[h]
\centering
% Again, this level of magic is unadvisable outside LaTeX lecture notes.
\newcommand{\example}[1]{\cmd{#1}\texttt &%
    \csname#1\endcsname{Example text}}
\begin{tabular}{l|l}
\example{tiny}\\
\example{scriptsize}\\
\example{footnotesize}\\
\example{small}\\
\example{normalsize}\\
\example{large}\\
\example{Large}\\
\example{LARGE}\\
\example{huge}\\
\example{Huge}
\end{tabular}
\end{figure}

You mostly need these when making figures/tables/source code listings
or customizing heading styles.
In a manuscript for a journal you probably should not mess around with font sizes.
Putting {\huge huge text} in the middle of a paragraph
breaks the line spacing and might cause you enemies in graphical design circles.


%
%
\subsection{Verbatim text}

If you need to display source code in your work,
the \pkg{listings} package is your friend.
This package offers a lot of customization,
so you should check out its documentation on CTAN.
We content ourselves with a very \emph{meta} example,
displaying the first lines of this lecture note itself:
%
\begin{VerbatimOut}{\jobname.tmp}
\lstset{basicstyle=\tiny\ttfamily,
  commentstyle=\color{gray},
  breaklines=true,
  prebreak=\mbox{\tiny$\searrow$}}

\lstinputlisting
  [language={[LaTeX]TeX}, lastline=11]
  {2nd-course-in-latex.tex}
\end{VerbatimOut}
\ShowExample
%
It is possible to either embed the source code within your \verb|.tex| file
by using the \env{lstlisting} environment,
or to input the contents directly from a source code file like above.

The package offers some support for making listings float like figures,
or alternatively you could define your own float environment (see \Cref{sec:custom floats}).
Computer science journals typically have their own instructions for this.

The \env{lstlisting} environment is a special variant of the \env{verbatim} environment.
All contents inside this environment are printed verbatim
in the typewriter font: \LaTeX{} commands and special characters are printed as is.
(Except of course for the \verb|\end{verbatim}|.
It would be silly not to evaluate that.)

\begin{VerbatimOut}{\jobname.tmp}
\begin{verbatim}
Printed as is, including
  whitespace.
\LaTeX & $math$
\end{verbatim}
\end{VerbatimOut}
\ShowExample

There is also the \verb|\verb| command for short spans of verbatim text.
This command has a special syntax:
it must be followed by a special character (or a number, but not \verb|*|).
This special character ends the verbatim span.
Obviously, you need to choose a character that does not appear in the text!
There is also a starred form that makes the whitespace visible.

\begin{VerbatimOut}{\jobname.tmp}
\verb+\LaTeX{}+ \\
\verb|$1 + 1$| \\
\verb*|$1 + 1$|
\end{VerbatimOut}
\ShowExample
%
These notes use a lot of \verb+\verb|...|+ in the code
(and the preceding was coded as
\verb!\verb+\verb|...|+!, which in turn was coded as\dots).

The \env{verbatim} environment is a more lightweight way to display source code,
but it offers no customization at all.
The \pkg{fancyvrb} package provides a lot of that customization.
However, the \pkg{listings} package additionally provides automatic syntax highlighting
for many common programming languages, so it should be your first choice.

\begin{technote}
Verbatim environments are implemented with dark \TeX{} magic:
essentially, they need to override the entire \TeX{} parser to do their work.
This causes a lot of limitations:
for example, you cannot use \cmd[as argument]{verb} as an argument to a command.
There are ways to override these issues;
see \verb|\SaveVerb| and \verb|\UseVerb| in \pkg{fancyvrb} documentation.
\end{technote}


%
%
%
\section{Colour}\label{sec:colour}

Due to historical and technical reasons, \TeX{} does not natively support colours.
The \pkg{xcolor} package adds this support.
Many other packages load \pkg{xcolor} automatically
and support the colour syntax (for example \pkg{tikz}).

\begin{gotcha}
Be careful with the spelling: the \obspkg{color} package is the original 90s implementation,
and its use is discouraged.
\end{gotcha}

Like with the font commands, there are two forms of the colour specification:
\cmd{textcolor} that colours only its (second) argument,
and \cmd{color} that colours everything until the current scope ends.
There are two basic ways and several advanced ones to define colors:

\begin{description}
\item[By name] \verb|\textcolor{blue}{...}| prints the text in \textcolor{blue}{blue}.
    By default, only a few basic names are loaded.
    If you load the package with \verb|[svgnames]| option,
    you get a lot more colours such as \textcolor{DarkOrange}{\texttt{DarkOrange}}.
    Check out the \href{https://en.wikipedia.org/wiki/Web_colors}{Wikipedia article ``Web colors''}
    or the package documentation for a full list.
    The capitalization is significant!
\item[By RGB value] \verb|\textcolor[rgb]{0.24,0.7,0.44}{...}|
    sets the intensities of red, green and blue pixels to 24~\%, 70~\% and 44~\% respectively,
    yielding something like \textcolor[rgb]{0.24,0.7,0.44}{this shade described as medium sea green}.
    In this model black is \verb|{0, 0, 0}| and white \verb|{1, 1, 1}|.
\item[By CMYK value] This one is only for those into printing presses;
    the optional argument is \verb|[cmyk]| and syntax is similar to the RGB model.
    The four parameters correspond to cyan, magenta, yellow and key (black) inks on white paper.
\item[By HSB value] Here the keyword is \verb|[hsb]|
    and the parameters are hue, saturation, and brightness.
\item[By wavelength]
    Science nerds can use \verb|\textcolor[wave]{410}|
    to approximate \textcolor[wave]{410}{the light at 410~nm wavelength}.
\end{description}

The package also offers a lot of ways to mix colours together.
As you probably learned in primary school,
this generally procudes mainly shades of greyish brown, so we do not talk about it here.%
\footnote{Another reason is that the result depends on the specific colour model.
Taking averages of RGB values can yield a very different result to averaging equivalent HSB values.
There is no `correct' way to do this;
in fact, trying to understand what colour \emph{really is}
leads you to a rabbit hole of mathematics, human perception, and questioning the reality.}
The only exception is the syntax \verb|\textcolor{blue!60}{...}|
which blends \textcolor{blue}{blue} with \textcolor{blue!60}{40~\%~white}.

It is possible to define custom colour names with \cmd{definecolor}.
This can be useful e.g.\ when creating TikZ pictures with recurring elements.
Here we follow the University of Helsinki style guide
and define the brand colour of the Faculty of Science:
%
\begin{VerbatimOut}{\jobname.tmp}
\definecolor{Sciency}{cmyk}{0,0.46,1,0}
\textcolor{Sciency}{Science!}
\end{VerbatimOut}
\ShowExample

\begin{practices}
Never use colour as the sole means of indicating information.
Many people read papers in black-and-white prints
or on ebook reader with grayscale screen.
Red-green colourblindness,
the most common form of colour vision deficiency,
affects about 1 in 12 males.

Even then, pay attention to the colour contrast.
Low-contrast text might be impossible to read e.g.\ on screen in bright sunlight,
or for a person with a vision deficiency.
\end{practices}


%
%
%
\section{Footnotes}

Footnotes are produced with the imaginatively named \cmd{footnote} command.
The command itself needs no explanation,
but we remark on a few points on placement and styling of footnotes.

\begin{gotcha}
Whitespace immediately preceding the footnote command is interpreted as a word space as usual.
If you put a footnote on a separate code line,
the line break is interpreted as a space.
This causes separation between the preceding word or punctuation.

The easy fix is to put a \verb|%| before the whitespace,
since it causes the whitespace and line break to be swallowed.
\begin{VerbatimOut}{\jobname.tmp}
An ugly space.
\footnote{First note!}\\

Tightly together.%
\footnote{Second note!}
\end{VerbatimOut}
\ShowExample
\end{gotcha}

Footnotes cannot be placed everywhere.
For example, footnotes cannot be nested:
the footnote mark appears but the text is placed nowhere.
In these cases the footnote mark can be placed with \cmd{footnotemark}
and the footnote text defined outside the environment with \cmd{footnotetext}.
Do note that now you are responsible for keeping the footnote symbols and texts in sync!
%
\begin{VerbatimOut}{\jobname.tmp}
\renewcommand{\footnotemark}{\mpfootnotemark} % Fake how it is used
Some text.%
\footnote{A footnote.\footnotemark}
\footnotetext{A nested footnote.}
\end{VerbatimOut}
\ShowExample[2]

Another potentially surprising behaviour is that \env[footnotes]{minipage} environments
have independent footnote numbering.
You can see this with the examples in these lecture notes;
their footnotes are marked alphabetically whereas standard footnotes are numeric.
You can use \cmd{footnotemark} to create a ``standard footnote'' reference inside the environment,
and define the footnote contents with \cmd{footnotetext} immediately after the environment.

If you want to customize the style and placement of footnotes,
the \pkg{footmisc} package should be your first stop.
It offers a range of footnote symbols, possibility for per-page footnotes,
and even placement of the footnotes in page margin instead.
In two-page layout, the \pkg{ftnright} package can be used to gather
footnotes in the right column.

Generally, footnotes are avoided in mathematical literature.
In some fields, such as law and linguistics,
it is common to have extremely long and nested footnotes.
In those cases the \pkg{manyfoot} and \pkg{bigfoot} packages can be used;
they are similar with slight differences, but I cannot comment on those.

Finally, there is the \pkg{enotez} package for printing end notes or chapter notes.


%
%
%
\section{List structures}

\LaTeX{} provides three kinds of list structures by default:\index{lists!standard}
\begin{description}
\item[\env{itemize}] A bulleted list.
\item[\env{enumerate}] A numbered list.
\item[\env{description}] This style of list.
\end{description}

The optional argument to the \cmd{item} command provides the content for the ``bullet symbol'':
%
\begin{VerbatimOut}{\jobname.tmp}
\begin{itemize}
\item[$\clubsuit$] Club
\item[$\spadesuit$] Spade
\item[$\heartsuit$] Heart
\item[$\diamondsuit$] Diamond
\end{itemize}
\end{VerbatimOut}
\ShowExample

List elements may contain multiple paragraphs,
and lists can be nested.
As we discuss in \Cref{sec:counters}, the running numbers can be accessed
with the \verb|enumi|, \verb|enumii|, and \verb|enumiii| counters
(corresponding to levels of nesting).\index{counters!list}

The \pkg{enumitem} package offers a lot of customization for the standard environments.
It adds an optional argument with key-value syntax to the standard environments.
\index{lists!styling}
\begin{VerbatimOut}{\jobname.tmp}
\begin{enumerate}
\item Default list
\item Nothing to see here
\end{enumerate}

Some text in between.

\begin{enumerate}[resume,noitemsep]
\item Numbering continued!
\item Tighter spacing!
\end{enumerate}

\begin{description}[labelwidth=2cm]
\item[Label] Extra space
\item[Long label] Aligned!
\item[Very long label] Uh-oh.
\end{description}
\end{VerbatimOut}
\ShowExample

You can also use the package to customize labels.
Note that you need to use a starred form of the counter command
(these were defined on page~\pageref{par:counter format}).\index{counters!format in lists}
\begin{VerbatimOut}{\jobname.tmp}
\begin{enumerate}[noitemsep,
  format=\bfseries,
  label={Rule~\arabic*.}]
\item Don't use plain \TeX.
\item See the above.
\end{enumerate}
\end{VerbatimOut}
\ShowExample

Instead of repeating yourself at every list environment,
you can use the \cmd{setlist} command to customize all of the lists:
%
\begin{VerbatimOut}{\jobname.tmp}
\setlist[enumerate]{noitemsep}

\begin{enumerate}
\item Tightly\dots
\item \dots{}spaced.
\end{enumerate}

Some text

\begin{enumerate}
\item Same\dots
\item \dots{}here.
\end{enumerate}
\end{VerbatimOut}
\ShowExample

It is also possible to define your own customized list environments.\index{lists!custom}
Here the starred \verb|label*| argument means: ``append this to the label of the previous list level''.
We then use the \verb|\setlist[rules,1]| command to further customize the first level.
\begin{VerbatimOut}{\jobname.tmp}
\newlist{rules}{enumerate}{2}
\setlist[rules]{noitemsep,
    format=\bfseries,
    label*=\arabic*.}
\setlist[rules,1]{noitemsep,
    label={Rule~\arabic*.}}

\begin{rules}
\item Don't use plain \TeX.
\item See the above.
\begin{rules}
\item Unless Don Knuth passes by.
\end{rules}
\end{rules}
\end{VerbatimOut}
\ShowExample


%
%
%
\section{Sectioning commands}

\begin{gotcha}
If your section title contains mathematical symbols
and you have \pkg[PDF navigation]{hyperref} loaded (as you do, right?),
you will probably get a warning.
This is because the PDF navigation bar format does not support mathematical symbols.

To solve this issue, you can use the \cmd{texorpdfstring} command.
It takes two arguments: the first is the one to show in the document,
and the second is the (non-mathematical) alternative to show in PDF navigation.
\begin{ExampleCode}
\section{The \texorpdfstring{$\phi^4$}{phi4} measure}
\end{ExampleCode}
This code displays ``The $\phi^4$ measure'' in the document
but ``The phi4 measure'' in the navigation bar.
\end{gotcha}

\todo{Front, main, back matter}

%
%
%
\section{Hyphenation, language, and overfull hboxes}\label{sec:overfull}\label{sec:babel}

\todo{Font encodings}

\todo{Special characters}

\todo{Do we need to talk about boxes somewhere?}
